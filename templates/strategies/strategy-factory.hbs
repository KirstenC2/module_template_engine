import { Injectable } from '@nestjs/common';
import { {{module.name}}Strategy } from './{{module.nameLower}}-strategy.interface';
{{#each module.strategies}}
import { {{className}} } from './{{filename}}.strategy';
{{/each}}

@Injectable()
export class {{module.name}}StrategyFactory {
  constructor(
    {{#each module.strategies}}
    private readonly {{nameLower}}: {{className}},
    {{/each}}
  ) {}

  getStrategy(type: string): {{module.name}}Strategy {
    switch (type) {
      {{#each module.strategies}}
      case '{{name}}':
        return this.{{nameLower}};
      {{/each}}
      default:
        throw new Error(`未知的巡检类型: ${type}`);
    }
  }
}
