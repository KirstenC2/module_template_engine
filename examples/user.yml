module:
  name: "User"
  description: "用户模块"
  fields:
    - name: "id"
      type: "number"
      required: true
      primary_key: true
    - name: "username"
      type: "string"
      required: true
      max_length: 100
    - name: "password"
      type: "string"
      required: false
      max_length: 500
    - name: "email"
      type: "string"
      required: true
      max_length: 50
    - name: "role"
      type: "string"
      required: true
      enum: ["admin", "user"]

  generate_service: true
  generate_repository: true
  response:
    - name: "UserResponseGeneralResponseDto"
      fields:
        - id
        - username
        - email
        - role
    - name: "UserInfoResponseDto"
      fields:
        - id
        - username
  update:
    - name: "UpdateUserEmailDto"
      fields:
        - email
    - name: "UpdateUserProfileDto"
      fields:
        - username
        - role

  service:
    methods:
      - name: "findAll"
        repository: "findAll"
        response: "UserResponseGeneralResponseDto[] | null"
      - name: "findOne"
        params:
          - name: "id"
            type: "number"
        repository: "findOneById"
        response: "UserInfoResponseDto | null"
      - name: "updateEmail"
        params:
          - name: "id"
            type: "number"
        update: "UpdateUserEmailDto"
        repository: "updateEmail"
        response: "UserInfoResponseDto | null"
      - name: "updateProfile"
        params:
          - name: "id"
            type: "number"
        update: "UpdateUserProfileDto"
        repository: "updateProfile"
        response: "UserResponseGeneralResponseDto | null"
  controllers:
    name: "UserController"
    base_path: "users"
    methods:
      - name: "findAll"
        http_method: "Get"
        service: "findAll"
        response: "UserResponseGeneralResponseDto[] | null"

      - name: "findOne"
        http_method: "Get"
        route: ":id"
        service: "findOne"
        params:
          - name: "id"
            type: "number"
        response: "UserInfoResponseDto | null"

      - name: "updateEmail"
        http_method: "Patch"
        service: "updateEmail"
        body: "UpdateUserEmailDto"
        response: "UserInfoResponseDto | null"

      - name: "updateProfile"
        http_method: "Patch"
        service: "updateProfile"
        body: "UpdateUserProfileDto"
        response: "UserResponseGeneralResponseDto | null"
  repository:
    methods:
      - name: "findAll"
        action: "findAll"
      - name: "findOneById"
        action: "findOne"
        params:
          - name: "id"
            type: "number"
      - name: "updateEmail"
        action: "update"
        params:
          - name: "id"
            type: "number"
        update: "UpdateUserEmailDto"
      - name: "updateProfile"
        action: "update"
        params:
          - name: "id"
            type: "number"
        update: "UpdateUserProfileDto"